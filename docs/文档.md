__《类部落冲突游戏开发工作文档》__

__一、项目概述__

基于 Cocos2d 开发的策略塔防 \+ 基地经营类游戏，核心玩法为 “基地建设 \+ 资源管理 \+ 兵种养成 \+ 攻防对战”，参考《部落冲突》的核心循环，补充细节模块以提升玩法策略性与体验流畅度。

__二、核心系统模块__

__（一）建筑类__

__分类__

__核心属性（补充后）__

__功能说明__

通用建筑

1\. 血量 / 耐久

2\. 占地格子数

3\. 建筑类型（己方 / 敌方）

4\. UI 绑定（信息显示）

5\. 等级系统（升级解锁属性）

6\. 模型 / 动画 / 音效绑定

7\. 阵营归属

8\. 建造 / 升级耗时

9\. 拆除返还资源比例

所有建筑的基础属性，统一管理生命周期

防御建筑

1\. 攻击范围（数值 \+ 可视化显示）

2\. 攻击对象（优先目标：兵种 / 药水 / 建筑）

3\. 攻速（攻击间隔）

4\. 索敌组件（优先攻击距离 / 血量）

5\. 是否可穿墙（如迫击炮是否能越过围墙）

6\. 伤害类型（单体 / 范围）

7\. 子弹系统（模型 / 音效 / 运动轨迹 / 伤害判定）

负责基地防御，补充 “伤害类型”“优先目标” 等策略性属性

生产建筑

1\. 资源加成定时器（生产间隔）

2\. 生产资源类型（金币 / 圣水 / 工人）

3\. 生产效率（等级对应产量）

4\. 死亡后资源损失比例

5\. 最大存储量（若为资源生产 \+ 存储二合一建筑）

明确 “生产类型” 和 “存储关联”，避免资源逻辑混淆

储存建筑

1\. 各资源最大容量

2\. 死亡后资源损失比例

3\. 容量升级规则（等级对应扩容）

单独管理资源存储，补充 “升级扩容规则”

围墙

1\. 血量 / 耐久

2\. 不可被 “循路系统” 穿透（强制兵种绕路）

3\. 分段显示（单段被破坏不影响整体）

4\. 建造 / 升级耗时

强化 “阻挡循路” 的核心功能，补充分段逻辑

兵营

1\. 可训练兵种列表（等级解锁新兵种）

2\. 训练单兵种耗时 / 消耗资源 / 占用人口

3\. 已训练兵种存储上限（人口限制）

4\. 兵种销毁返还资源比例

5\. 显示当前已训兵种（数量 / 属性）

补充 “训练解锁”“人口限制” 等核心养成逻辑

魔药厂

1\. 可制作药水分类（攻击 / 防御 / 资源等）

2\. 制作单药水耗时 / 消耗资源 / 占用人口

3\. 药水存储上限

4\. 显示已制作药水（数量 / 效果）

对齐兵营逻辑，统一养成体验

__（二）子弹类__

__属性__

__补充细节__

模型 / 音效

不同防御建筑对应不同子弹外观 / 音效

运动器

弹道类型（直线 / 抛物线 / 跟踪）

移动速度

伤害

伤害数值（等级对应）

伤害范围（单体 / 半径）

伤害判定（命中后消失 / 穿透）

__（三）兵种类__

__属性__

__补充细节__

基础属性

1\. 血量

2\. 攻击力

3\. 移速

4\. 移速（地面 / 空中）

5\. 攻击距离（近程 / 远程）

6\. 类型（空 / 陆）

7\. 索敌优先级（优先攻击防御建筑 / 资源建筑）

养成 / 战斗

1\. 训练消耗（资源 / 人口 / 时间）

2\. 模型 / 动画 / 音效

3\. 死亡后掉落资源

4\. 特殊技能（如 “范围自爆”“治疗友军”）

__（四）药水类__

__属性__

__补充细节__

效果系统

1\. 生效范围（圆形半径 / 矩形区域）

2\. 生效作用（伤害 / 治疗 / 增益 / 减益）

3\. 持续时间（即时生效 / 持续生效）

4\. 价格 / 人口

5\. 特效 / 音效

6\. 作用目标（己方 / 敌方 / 兵种 / 建筑）

__（五）资源系统__

__模块__

__核心逻辑（补充后）__

资源类型

1\. 基础资源：金币（建筑 / 兵种训练）、圣水（药水 / 高级兵种）

2\. 特殊资源：工人（建筑建造 / 升级）、人口（兵种 / 药水占用）

资源流程

1\. 生产：生产建筑定时产出

2\. 存储：存储建筑 / 生产建筑上限管理

3\. 消耗：建造 / 升级 / 训练 / 药水制作

4\. 损失：建筑被拆 / 战斗失败扣除

5\. 获得：生产 / 战斗掠夺 / 任务奖励

__（六）战斗系统__

__模块__

__补充细节__

进攻 UI

1\. 胜利百分比（摧毁敌方建筑占比）

2\. 可放置区域（敌方基地范围）

3\. 未 / 已放置兵种显示（数量 / 人口占用）

4\. 逃跑按钮（放弃进攻，无奖励）

5\. 资源偷取量实时显示

6\. 结算画面（奖励 / 摧毁率评级）

索敌系统

1\. 防御建筑 / 兵种的索敌优先级（如 “优先攻击最近目标”“优先攻击血量最低目标”）

2\. 循路系统（兵种绕开围墙 / 障碍，沿最短路径移动）

3\. 目标切换逻辑（当前目标死亡后重新索敌）

胜负判定

1\. 进攻方：摧毁敌方核心建筑（如 “大本营”）直接胜利；达到指定摧毁率获得对应奖励

2\. 防守方：全歼进攻方兵种 / 药水，或进攻方主动逃跑

__（七）UI 系统__

__模块__

__补充细节__

开局 / 主界面

1\. 登录 / 游客模式

2\. 服务器选择（若做多端）

3\. 主界面布局（资源显示区 / 建筑操作区 / 进攻入口 / 任务栏）

基地 UI

1\. 资源显示（金币 / 圣水 / 工人 / 人口实时数值）

2\. 充值商店（资源购买 / 月卡 / 礼包）

3\. 建筑操作（建造 / 升级 / 拆除 / 移动）

4\. 建筑信息面板（统一显示：等级 / 属性 / 升级需求）

地图切换

1\. 己方基地地图

2\. 进攻目标地图（匹配敌方基地）

3\. 资源采集地图（如 “野外矿点” 扩展玩法）

__（八）代码系统（Cocos2d 实现逻辑）__

__模块__

__实现要点__

资源管理

用单例模式管理资源的 “生产 / 存储 / 消耗 / 损失 / 获得”，绑定 UI 实时更新

模型 / 动画 / 特效

基于 Cocos2d 的 Sprite/Animation 组件，封装 “资源池” 复用模型，减少性能消耗

基地升级系统

关联建筑等级、资源产量、解锁内容，通过配置表（json）管理各等级属性

战斗逻辑

用 “状态机” 管理兵种 / 建筑的行为（待机 / 移动 / 攻击 / 死亡），碰撞检测用 Cocos2d 的物理系统或矩形检测

多人系统（扩展）

若做联机，对接服务器实现 “玩家匹配”“进攻数据同步”，本地做战斗回放缓存